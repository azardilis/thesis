\documentclass[phd]{infthesis}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[british]{babel}
\usepackage{microtype}
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\usepackage[english=british,autopunct=false]{csquotes}
\usepackage[natbib=true,style=authoryear-comp,maxbibnames=6]{biblatex}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{wrapfig}
\usepackage{xfrac}
\usepackage{xspace}
\usepackage{mathcommon}
\usepackage[sc]{mathpazo}
\usepackage{hyperref}
\usepackage{expl3}
\usepackage{enumitem}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{mathpartir}
\usepackage{fancyvrb}
\usepackage{inconsolata}
\usepackage{multirow}

\frenchspacing

% Bibliography
\addbibresource{thesis2.bib}
\bibliography{thesis2}

% Text
\newcommand{\ie}{i.e.\xspace}
\newcommand{\eg}{e.g.\xspace}

% Referencing
\newcommand{\chp}[1]{\S\ref{chp:#1}}
\newcommand{\sct}[1]{\S\ref{sec:#1}}
\newcommand{\ssec}[1]{\S\ref{subsec:#1}}
\newcommand{\eqn}[1]{Eq.~\ref{eq:#1}}
\newcommand{\eqns}[2]{Eq. \ref{eq:#1} and \ref{eq:#2}}
\newcommand{\lem}[1]{Lemma~\ref{lemma:#1}}
\newcommand{\lems}[2]{Lemmas \ref{lemma:#1} and \ref{lemma:#2}}
\newcommand{\thm}[1]{Th.~\ref{thm:#1}}
\newcommand{\fig}[1]{Fig.~\ref{fig:#1}}
\newcommand{\diagram}[1]{diagram~\ref{eq:#1}}
\newcommand{\app}[1]{Appendix~\ref{app:#1}}
\newcommand{\mcite}[1]{\textcolor{gray}{#1}} % missing cite
\newcommand{\defn}[1]{Def.~\ref{def:#1}}
\newcommand{\prop}[1]{Prop.~\ref{prop:#1}}

% Math
\renewcommand{\tuple}[1]{(#1)}
\DeclareMathOperator*{\expn}{exp}
\renewcommand*{\exp}[1]{e^{\,#1}} % \mathrm{e}^{#1}}
\renewcommand{\qedsymbol}{\ensuremath{\blacksquare}}
\newcommand{\partialto}{\rightharpoonup}
\newcommand{\id}{\vec{1}} % identity function
\newcommand{\mr}[1]{\mathrm{#1}}

\newcommand{\den}[1]{\llbracket #1 \rrbracket}
\newcommand{\m}[1]{\{\!| #1 |\!\}}
\newcommand{\M}[1]{\mathcal{#1}}
\newcommand{\MS}[0]{\mathrm{M}}
\newcommand{\SQ}[0]{\mathrm{S}}
\newcommand{\s}[1]{\underline{#1}}
\newcommand{\G}[0]{\Gamma}
\newcommand{\D}[0]{\Delta}
\newcommand{\mytt}{t\!t}
\newcommand{\myff}{f\!\!f}

\newcommand{\V}{\mathrm{V}}

\newcommand{\sel}{\mathrm{sel}}
\newcommand{\fold}{\mathrm{fold}}

\newcommand{\ms}{\mathrm{ms}}


\newtheorem{mydef}{Definition}
\def\dotminus{\mathbin{\ooalign{\hss\raise1ex\hbox{.}\hss\cr
  \mathsurround=0pt$-$}}}
\setlength{\tabcolsep}{8pt}
\renewcommand{\arraystretch}{1.0}

\newcommand{\match}{m}
\newcommand{\up}[1]{\uparrow\! #1}

\newcommand{\n}{\mathrm{n}}

% Other stuff
\newcommand{\maybe}[1]{\textcolor{gray}{#1}}
\newcommand{\todo}[1]{\textcolor{red}{TODO: #1}}

% rules
\newcommand{\ar}[2]{\mr{#1} \! = \! {#2}}

\setlength{\tabcolsep}{8pt}
\renewcommand{\arraystretch}{1.2}

\begin{document}
\chapter{Conclusions}
After a brief summary of the work presented in this thesis, we next go
through and dicuss each aspect of our work in the context we have set above to
understand its limitations, implications that follow, and possible future work
that it suggests.

\section{Summary}
% summary
No complex system can be understood by extrapolation of the properties of its
elementary components. In order to understand a complex system, like an
organism, one needs to consider explanations at various levels of detail. This
is especially true in biological systems where entities (processes and so on)
and their organisation give rise to properties of processes at the next level of
detail and they in turn to the next until you get to the level of a living
entity, the organism. In order to understand the organism (and consequently
life) we therefore need to understand the links between the explanations at the
various levels of detail.

The importance of organisation between components has been stressed before and
it is in fact the fundamental concept of systems theory. While the focus in
Biology has been traditionally on single components the systems view has found
its way into mainstream biological thinking with the systems biology
movement. The stress on organisation and its constructive nature also leads to
questions about representation. The most widely used technical languages for the
representation of physical systems come from the dynamics world. Since the
questions there are usually different, abstracting a system to its properties
through variables and ignoring organisation is usually adequate. The
constructive organisation of biological systems though poses different
requirements although the value of abstraction still remains. We present
\emph{Chromar} a language that combine organisational aspects through the
explicit representation of discrete entities, agents, and non-organisational
aspects through abstract properties of these entities, attributes. The concept
of abstraction is there in extensions to the expression language used for the
dynamics of the attributes. Observables recognise the need for explanations at
different levels by allowing an explicit functional link between abstract
quantifiable properties and more explicit representations. Fluents, again, allow
abstraction via the description of system properties using time-dependent
deterministic value for describing parts of the system we do not wish to model
mechanistically.

In plant research the focus has always been on the model species
Arabidopsis. Functional-structural models have focused on the constructive
organisation of plant organs (development) as well as functional aspects like
metabolism. The Framework Model is inspired by these but adds more breadth by
explicitly including a genetic circuit and phenology models to time the
conceptual development towards flowering. The FM covers one part of plant
development but does not extend to reproduction, which means that it has limited
applicability in ecological studies. Ecological studies on the other hand
consider the full lifecycle but of an abstract version of plants where its
construction and physical development are absent. We presented \emph{FM-life}
an extension to the FM to the full lifecycle including reproduction and its
scale-up to the population level via a clustering approoach to tractable
simulate population of plants over multiple decades in different genotype x
environment scenarios.

Finally, we presented another more engineering oriented use of multi-scale plant
model as devices for optimising plant traits. Instead of the more traditional
genome engineering approach we focused on engineering the environment during
their development to achieve specific growth-related traits.


\section{Chromar and representations of multi-scale biology}
Biology is modular. This includes "visibly" differentiated substructures like
the cell or organs, for example, given in spatial terms but also other entities
that form units in a non-spatial way that could be identified by the strength of
the interactions between their components or their functional goal. For example,
one might identify functional units in reaction networks
\citep{ederer_approach_2003} and hierarchical modules in metabolic networks
\citep{ravasz_hierarchical_2002}. These modules are organised either by
interaction -- more so the case in non-spatial modules -- or by physical forces
-- more the case in spatially distinguished modules like cells
\citep['Biological and Physical systems' section]{simon1962architecture}.

As we have pointed out, in order to understand complex biological systems, like
entire organisms, we need explanations at multiple levels of detail. At each
level of detail we can identify different modules, which can either be treated
as undivided wholes or as organisations of their elementary components/modules
\citep{varela_autopoiesis:_1974}. The links between the functioning of modules
at different levels of detail are crucial for fundamental questions in
Biology. We will call these aspects of biology that deal with modules, their
organisation (interaction), and hierarchy as the \emph{organisational} aspects
of systems. Importantly this organisation is constructive (dynamic).

Explicitly representing these links in organisational terms in detail, however,
is probably impractical in many cases. Even when considering the elementary
components of a module and their organisation, certain aspects of the
functioning of a module are still more practically captured through some
abstraction to pick out properties of interest that perhaps are important for
the links to the next level of detail. The abstraction that one uses to
understand the functioning of a module will depend on the level of understanding
and practical considerations. For example, we might not want to describe the
mechanism of a particular process ('how') but only 'what' it does at a more
descriptive level.  We will call these the \emph{non-organisational} or
\emph{abstract} aspects of a system (or its model).

Given that in multi-scale explanations of systems require representation of both
non-organisational and organisational aspects, the question of the technical
language used for this representation is interesting. For the organisational
parts since we are considering discrete entities, we need collections of objects
\citep{fontana_barrier_1996}. Other aspects of the organisation possibly also
then need the description of relations on these collections of objects
\citep{rashevsky_topology_1954, rosen_relational_1958}. The constructive nature
of this organisation means that we need a way to describe the
creation/destruction of objects and the creation or deletion of pairings of
objects in the defined relations. In Chromar we have simple representations of
organisational aspects where objects, agents, can be defined along with their
creation/destruction. Explicit definition of relations is not possible but we
have seen that different kinds of relations on objects exist in object-based
languages (Section~\ref{sec:objectLangs}). Implicit representation is possible
through agent attributes.

For the non-organisational aspect the question of representation is more
difficult since the point of abstrction is to use the most convenient or
practical explanation for a particular module. Chromar allows agents (modules)
to have attributes, which are lists of typed values. While attributed objects
(colours and so on) have been used in languages before, in Chromar these take an
`elevated' status where they could stand for entire models. Their dynamics come with
discrete transitions, which is the same way the dynamics of objects
(deletion/creation) are defined. This is very general and could satisfy a range
of applications and we have seen that the Dynamical Grammars of
\citet{mjolsness2006stochastic} also allow the description in terms of the more
familiar ODEs. 

What if we wanted to use the most convenient abstraction for the abstract parts
of each module though? Pragmatic approaches like multi-model simulators
\citep{erbm_mois_2015,cis_2018} allow that through concurrent running of
executables representing the simulation of each module. The organisation of the
modules, for example variable communication, is usually represented externally
in a configuration file. While this achieves the goal of simulation, the
resulting multi-model does not achieve the second goal of models that we have
identified regarding understanding since the organisation is opaque.

\begin{figure}[tb]
  \centering
  \includegraphics[width=0.9\textwidth]{figures/hypothetical.eps}
  \caption{A hypothetical system inspired by Chromar that combines
    non-organisational and organisational descriptions. Chromar gives us a clue
    of how these aspects can be combined with enriched expression. Unlike
    Chromar though we show here a system where relations are explicit and the
    dynamics can be expressed in the most relevant abstraction in each module
    (agent in Chromar).}
    \label{fig:hyp}
\end{figure}

What the above suggest for possible future work is a system that handles both
the organisational aspects in an object-based language and the
non-organisational aspects possibly in many languages. The combination of these
in Chromar through enriched expressions suggests a way that both organisational
and abstract aspects could co-exist naturally in the same system. Consider for
example the system shown in Figure~\ref{fig:hyp}. Like Chromar, the
organisational aspects are represented by discrete objects that have types
(colours in the diagram). Non-organisational aspects exist as part of these
modules to describe aspects of their functioning that we want to capture in a
convenient abstraction. This is like the attributes of agents in Chromar, which
can represent entire models. Different levels of explanation can be combined
with observables, for example a variable in one level might be a function of the
state at another level. Other dynamics can be defined independent of any module,
like Chromar does with fluents. Both of these can coexist with the dynamics of
state variables inside each module, in a similar way that attribute dynamics are
given using enriched epxressions, which combine regular expressions,
observables, and fluents.

Both the organisational and non-organisational dynamics can be given with rules,
like we have seen with Chromar. The object rules can add/delete or
relate/unrelate objects. Rules can also be used for the interaction of the
internal dynamics of each module. For example, if a state variable from one
module is needed to compute the state variable for another, this interaction can
be captured by synchronsing them through a rule. Internal dynamics are captured
trough rules referring only to single modules.

Unlike Chromar, however, the abstractions in each module or the indepedent ones
can be written in any language and explicit relations can be encoded. In order
to achieve this we will either need formal mappings between the mathematical
interpetations of the abstractions used in each module as suggested by
\citet{mjolsness_prospects_2018} or a more pragmatic system using simulation
synchronisation, for example through message passing, which is the approach
taken by \citet{cis_2018}.

The system of organisation of processes reminds us of the graph of process
interactions of \citet{rashevsky_topology_1954}, who was one of the first to
point to the importance of considering the `relational' aspects of Biology (what
we called organisational aspects here). It could also be comparable to the the
multiscale topological structures of \citet{godin_multiscale_1998}, which is the
main representation structure used in another tool for simulation of plant
systems based on data-flows on graphs
\citep[OpenAlea;][]{pradal_openalea:_2008}.

\subsection{Practical considerations}
While there is a lot of work on theoretical aspects of modelling languages,
practical aspects related to the practical use of these languages are often
overlooked. This might be because these are usually tied to short-lived research
projects. Some exceptions exist, for example Kappa (\ssec{links}) has seen
a continuous development of a suite of practical tools for its use for a number
of years \citep[Kappa platform;][]{boutillier2018kappa}.

Chromar could similaryl benefit from practical tools to overcome practical
hurdles to its use. This will be especially important for systems like the one
we outlined in the previous section that allows the combination of multiple
modules. In comprehensive models it is becoming rare that one person would write
the entire model. A practical modelling tool that combines model definition with
a library of existing modules would be very powerful. Drawing from the ideas in
the previous section, one could imagine a (possibly visual) interface where
existing or new modules can be connected like jigsaw puzzle pieces similar to
the way programs are defined in visual programming languags like Scratch
\citep{maloney_scratch_2010}.

\subsection{Database ideas}
For the observables we use an analogy of the state of the system (multiset of
agent values) to a database. The first part of the observables are defined with
a `select' statement that picks out parts of the state in a similar way to the
select statement in database query languages. Similar techniques appear already
in trace-query languages where we have observables over state traces instead of
single states \citep{laurent_trace_2018}. The left-hand sides of rules can
similarly be thought as select statements as they pick out subsets of the state
where the transformation represented by the rule can be applied.

This connection can be exploited to allow the adoption of techniques from
database research for rule-based systems. One area could be to use techniques
from database research to increase the performance of language
implememntations. We highlighted some possible ways our implementation could be
improved by avoiding recomputing the matches of each rule at every step of the
simulation. This is similar to the \emph{view maintenance problem}, a well
studied problem in database theory. Views are query results over a database that
need to be kept consistent under changes to the underlying database. There are
efficient solutions to the problem for databases with duplicates (database is
taken as a multiset) that could be exploited in the calculation of our matches
to avoid the current naive recomputation at each step
\citep{griffin_incremental_1995}.

Apart from practical results a large amount of theory work also becomes
available, for example for query languages on multisets, which are ubiquitous in
the object-based modelling languages \citep{libkin_query_1997,
  buneman_comprehension_1994}.


%This is the key!!!!!

% made the tie between non-organisational and organisational aspects
% stronger. through fluents and observables
% abstract vs non-abstract spaces
% Make the variables more first-class
% So that they represent whole models perhaps and their connection over multiple
% level of explanation the abstract to the more concrete..enriched expressions
% suggest a way that this could be done
% could be combined

% show how examples to see the challenges to advance their resolution
% refer back to how things in the previous chapter lead to the realisation
% discussed here
% If I had more time + future

% (mention database ideas that could mean borrowing ideas from databases for, say,
% efficient implementation etc.)
% + Laurent paper
% observables over a single agent
% which suggests --->
% --->

% There are ways (see Ricardo's work to abstract a system that includes some form
% of organisation and one level of detail to another.
% Observables are not like that


%\subsection{Multi-scale models that combine}
% What does the Chromar experience suggest?
% Organisational aspects through Chromar or an object-based lang to capture either
% things that we consider objects or abstract objects like processes (see
% Barabasi)
% The non-organisational aspects can be captured in any relevant abstraction
% depending on the level of understanding Can be even treated as undivided wholes
% if needed

% Practically will need either mappings between formalisms or more pragmatically
% something like mois cis\_interface

% mois cis etc. combination of models is not a model!!


\section{Organism-centred evolutionary ecology}
effect of one mechanism on context? This theme is also important for the
previous section, abstract then mechanisms can be added later. It might be
interesting to see if we understand the effects of a single mechanism on
higher-levels of organisation.
Not always at the mechanism level -- see Marr's levels

Since we're plant biologist and the plant is where we have mechanims information
we would like to see the effect on ecology and a plant centred

With phenology we kind of understand at hte first level of understanding, going
to the second level of mechanism or of how this is realised we need the organism


Experimental validation?


% \section{Multi-scale organism models for engineering}
% Finally,
% for these I'm not sure we need the organism. The organism is there for the
% fundamental questions
% We can engineer the environemnt etc.

% Why do we use a multi-scale detail model?

\printbibliography[heading=bibintoc]
\end{document}